<!-- app/views/dashboard/show.html.erb -->
<nav class="navbar navbar-expand-lg bg-info">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Navbar brand -->
    <%= image_tag 'logoIcon.png' ,style: "width:10rem; height:8rem;" %>

    <!-- Toggle button -->
    <button
      data-mdb-collapse-init
      class="navbar-toggler bg-dark"
      type="button"
      data-mdb-target="#navbarButtonsExample"
      aria-controls="navbarButtonsExample"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarButtonsExample">
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item mt-4">
          <H1><%=current_user.usertype%>'s Dashboard</H1>
        </li>
      </ul>
      <!-- Left links -->

      <div class="d-flex align-items-center">
        <%= link_to 'Edit Profile', edit_user_registration_path, class: "btn btn-success me-3  "%>
        <%= button_to "Sign Out", destroy_user_session_path, method: :delete, class: "btn btn-primary me-3" %>
      </div>

    </div>

  </div>

</nav>
<% if current_user.usertype.downcase == 'manager' %>

  <div class="row">
    <div class="col-lg-4 col-form-label">

      <%= link_to "Create New Project", new_project_path, class: "btn btn-primary", data: { turbo_frame: 'new_project' } %>
    </div>
  </div>
  <% end %>

<% if current_user.usertype.downcase == 'qa' %>

  <div class="row">
    <div class="col-lg-4 col-form-label">
      <%= link_to "View My Projects", qa_projects_path, class: "btn btn-primary" %>
    </div>
  </div>
  <% end %>

</div>
<!-- Navbar -->
<div class="container-fluid ">
      <%= turbo_frame_tag "new_project" %>

<h1 class="text-dark">Projects</h1>
<%if @projects%>
<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Description</th>
      <%if current_user.usertype.downcase=='manager'%>
      <th>Add/Remove</th>
      <th>Edit/Delete</th>
     <th>View</th>
     <%end%>
     <%if current_user.usertype.downcase=='qa'%>
      <th>Actions</th>
     <%end%>
    </tr>
  </thead>
  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td><%= project.id %></td>
        <td><%= project.project_name %></td>
        <td><%= project.project_description %></td>
        <%if current_user.usertype.downcase=='manager'%>
        <td>
           <%= link_to "Add User", add_user_project_path(project.id),class: 'btn btn-info btn-sm' %>
           <%= link_to "Remove User", remove_user_project_path(project.id),class: 'btn btn-danger btn-sm' %>
        </td>
        <td>
          <%= link_to 'Edit Project', edit_project_path(project), class: 'btn btn-success btn-sm',data: { turbo_frame: 'modal' }  %>
           <%= button_to "Delete",
                  project_path(project),
                  method: :delete,
                  class: "btn btn-danger btn-sm" %>
        </td>
         <td>
           <%= link_to "View Project" , project_path(project.id) ,class: 'btn btn-primary btn-sm' %>
        </td>
        <%end%>
        <%if current_user.usertype.downcase=='qa'%>
        <td>
          <%= link_to "Report a bug", root_path(project.id) ,class: 'btn btn-primary btn-sm' %>

        <%end%>

      </tr>
    <% end %>
  </tbody>
</table>
<%else%>
<h1>No Projects</h1>
<%end%>





